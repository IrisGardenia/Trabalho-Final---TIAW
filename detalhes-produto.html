<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hermes - Detalhes do Produto</title>
    <link rel="stylesheet" href="detalhes-produto.css">
    <link rel="shortcut icon" href="assents/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="produtos.js"></script>
<script src="program.js"></script>

</head>


<body>
   
    <header>
        <div class="top-bar">
            <img src="assents/menu-icon.png" alt="Ícone do menu" class="menu-icon" onclick="toggleMenu()">
            <a href="index.html" class="logo">Hermes</a>
            <div class="icons">
                <div class="icon-container1">
                    <a href="telaLogin.html">
                        <img src="assents/user-icon.png" alt="Ícone de usuário">
                    </a>
                </div>
                <div class="icon-container2">
                    <a href="#">
                        <img src="assents/favorite-icon.png" alt="Ícone de item favorito">
                    </a>
                </div>
                <div class="icon-container cart-container">
                    <img src="assents/cart-icon.png" alt="Ícone de carrinho de compras" onclick="toggleCartMenu()">
                    <span id="cart-count">0</span>
                </div>
            </div>
        </div>
       
    </header>
    <div class="cart-menu" id="cart-menu">
        <div class="cart-menu-content">
            <button class="close-cart" onclick="toggleCartMenu()">
                <img src="assents/close-icon.png" width="30px" alt="">
            </button>
            <h4>Carrinho</h4>
            <button id="clear-cart" class="deletar" onclick="limparCarrinho()">Limpar Carrinho</button>
            <div id="cart-items">
                <p id="empty-cart-message" style="display: none;">Hm... Você ainda não adicionou itens ao carrinho... <br> Seu carrinho está vazio!</p>
                <div id="produto-detalhe">
                    <h2 id="produto-nome"></h2>
                    <img id="produto-imagem" src="" alt="">
                    <p id="produto-descricao"></p>
                    <p id="produto-preco"></p>
                    <div class="cart-total">
                        <strong>Total: </strong><span id="cart-total">R$ 0,00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>                              
                  
 
                </div>
            
                <!-- Estrutura do item do carrinho -->
                
             
            </div>
        </div></div>
        </div>
    </div>   
 

<nav>
    <ul class="menu" id="menu">
        <li><img src="assents/close-icon.png" width="35px" alt="Ícone para fechar o menu" class="close-icon" onclick="toggleMenu()"></li>
        <li><h1> <b>Hermes</b></h1></li>
       
       
        <li><p>Configurações</p></li>
        <li class="menu-item"><a href="profile.html">Minha conta</a></li>
        <li class="menu-item"><a href="sobre-nos.html">Quem Somos</a></li>
        <li class="menu-item"><a href="index.html">Voltar</a></li>
    </ul>
</nav>

<main>
    <section class="produto-details">
        <div class="produto-image">
            <img class="produto-imagem" src="" alt="Nome do Produto">
        </div>
        <div class="produto-info">
            <h1 class="produto-nome produto-title"></h1>
            <p class="produto-descricao produto-description"></p>
            <p class="produto-marca produto-detail"><strong>Marca:</strong> <span class="marca"></span></p>
            <p class="produto-disponibilidade produto-detail"><strong>Disponibilidade:</strong> <span class="disponibilidade"></span></p>
            <p class="produto-preco produto-detail"><strong>Preço:</strong> <span class="preco"></span></p>
            <p class="produto-garantia produto-detail"><strong>Garantia:</strong> <span class="garantia"></span></p>
            <h2>Especificações Gerais</h2>
            <ul class="produto-especificacoesGerais produto-detail">
                <!-- Os itens serão adicionados dinamicamente via JavaScript -->
            </ul>
            <h2>Especificações do Produto</h2>
            <ul class="produto-especificacoesProduto produto-detail">
                <!-- Os itens serão adicionados dinamicamente via JavaScript -->

            </ul>
            <button id="adicionar-carrinho" class="btn">Adicionar ao Carrinho</button>
                <button id="comprar" class="btn">Comprar Agora</button>
            </div>
            <p id="mensagem-adicao" class="mensagem-adicao" style="display: none;"></p>
              
            

        </div>
    </section>
</main>




    
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="informacoesempresa">
                <img src="assents/hermes1.png" alt="Logo Hermes" class="footer-logo">
            </div>
            <div class="empresa-detalhes">
                <h4>Hermes</h4>
                <p>Site de Periféricos Hermes</p>
                <p>Rua dos Periféricos, 123</p>
                <p>Betim, MG, Brasil</p>
                <p>Telefone: (31) 1234-5678</p>
                <p>Email: contato@hermes.com.br</p>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <p class="footer-address">Endereço: Betim, MG - Brasil</p>
           
        </div>
    </div>
    </div>
    </footer>

    <script>
   

   function toggleMenu() {
    const menu = document.getElementById('menu');
    menu.classList.toggle('open');
}

function toggleCartMenu() {
    const cartMenu = document.getElementById('cart-menu');
    cartMenu.classList.toggle('open');
}
//fim 



document.addEventListener('DOMContentLoaded', function () {
            // Função para obter o valor de um parâmetro de URL
            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }
    
            // Obter o ID e a categoria do produto da URL
            const produtoId = parseInt(getQueryParam('id'));
            const categoria = getQueryParam('categoria');
    
            if (!produtoId || !categoria) {
                console.error('ID do produto ou categoria não encontrados na URL');
                return;
            }
    
            // Função para encontrar o produto pelo ID e categoria
            function encontrarProdutoPorId(id, categoria) {
                const produtos = produtosPorCategoria[categoria];
                return produtos.find(produto => produto.id === id);
            }
    
            const produto = encontrarProdutoPorId(produtoId, categoria);
    
            if (!produto) {
                console.error('Produto não encontrado');
                return;
            }
    
            // Atualizar a página com os detalhes do produto
            document.querySelector('.produto-imagem').src = produto.imagem;
            document.querySelector('.produto-imagem').alt = produto.titulo;
            document.querySelector('.produto-nome').textContent = produto.titulo;
            document.querySelector('.produto-descricao').textContent = produto.descricao;
            document.querySelector('.produto-marca .marca').textContent = produto.marca;
            document.querySelector('.produto-disponibilidade .disponibilidade').textContent = produto.disponibilidade;
            document.querySelector('.produto-preco .preco').textContent = produto.preco;
            document.querySelector('.produto-garantia .garantia').textContent = produto.garantia;
    
            // Adicionar especificações gerais
            const especificacoesGeraisList = document.querySelector('.produto-especificacoesGerais');
            produto.especificacoesGerais.forEach(especificacao => {
                const li = document.createElement('li');
                li.textContent = especificacao;
                especificacoesGeraisList.appendChild(li);
            });
    
            // Adicionar especificações do produto
            const especificacoesProdutoList = document.querySelector('.produto-especificacoesProduto');
            produto.especificacoesProduto.forEach(especificacao => {
                const li = document.createElement('li');
                li.textContent = especificacao;
                especificacoesProdutoList.appendChild(li);
            });
       
       });
       
document.getElementById('comprar').addEventListener('click', function() {
    // Recupera as informações do produto
    const produto = {
        imagem: document.querySelector('.produto-imagem').src,
        nome: document.querySelector('.produto-nome').textContent,
        preco: document.querySelector('.produto-preco .preco').textContent
    };

    // Salva as informações no sessionStorage
    sessionStorage.setItem('produtoCompra', JSON.stringify(produto));

    // Redireciona para a página de pagamento
    window.location.href = 'telaPag.html';
});


        /////fimmmm  da secao


        //inicio da seccao do carrinho


       
      
        document.addEventListener('DOMContentLoaded', function () {
    // Função para obter o valor de um parâmetro de URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Obter o ID e a categoria do produto da URL
    const produtoId = parseInt(getQueryParam('id'));
    const categoria = getQueryParam('categoria');

    if (!produtoId || !categoria) {
        console.error('ID do produto ou categoria não encontrados na URL');
        return;
    }

    // Função para encontrar o produto pelo ID e categoria
    function encontrarProdutoPorId(id, categoria) {
        const produtos = produtosPorCategoria[categoria];
        return produtos.find(produto => produto.id === id);
    }

    const produto = encontrarProdutoPorId(produtoId, categoria);

    if (!produto) {
        console.error('Produto não encontrado');
        return;
    }

    // Atualiza o contador inicialmente ao carregar a página
    atualizarContadorCarrinho();

    // Atualizar a página com os detalhes do produto
    document.querySelector('.produto-imagem').src = produto.imagem;
    document.querySelector('.produto-imagem').alt = produto.titulo;
    document.querySelector('.produto-nome').textContent = produto.titulo;
    document.querySelector('.produto-descricao').textContent = produto.descricao;
    document.querySelector('.produto-marca .marca').textContent = produto.marca;
    document.querySelector('.produto-disponibilidade .disponibilidade').textContent = produto.disponibilidade;
    document.querySelector('.produto-preco .preco').textContent = produto.preco;
    document.querySelector('.produto-garantia .garantia').textContent = produto.garantia;

    // Adicionar especificações gerais
    
    // Adicionar event listeners para os botões
    const adicionarCarrinhoButton = document.getElementById('adicionar-carrinho');
    const comprarButton = document.getElementById('comprar');

    adicionarCarrinhoButton.addEventListener('click', adicionarAoCarrinhoHandler);
    comprarButton.addEventListener('click', comprarHandler);

    verificarCarrinhoVazio();
});

function adicionarAoCarrinhoHandler() {
    const produto = obterDetalhesProduto();
    adicionarAoCarrinho(produto);
}


function obterDetalhesProduto() {
    const produtoImagem = document.querySelector('.produto-imagem').src;
    const produtoNome = document.querySelector('.produto-nome').textContent;
    const produtoDescricao = document.querySelector('.produto-descricao').textContent;
    const produtoMarca = document.querySelector('.marca').textContent;
    const produtoDisponibilidade = document.querySelector('.disponibilidade').textContent;
    const produtoPreco = document.querySelector('.preco').textContent;
    const produtoGarantia = document.querySelector('.garantia').textContent;

    return {
        id: new Date().getTime(), // Usando timestamp como ID único
        imagem: produtoImagem,
        titulo: produtoNome,
        descricao: produtoDescricao,
        marca: produtoMarca,
        disponibilidade: produtoDisponibilidade,
        preco: produtoPreco,
        garantia: produtoGarantia
    };
}
function comprarProdutoDoCarrinho(idProduto) {
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const produto = carrinho.find(item => item.id === idProduto);

    if (produto) {
        sessionStorage.setItem('produtoCarrinho', JSON.stringify(produto));
        window.location.href = 'telaPag.html';
    } else {
        console.error('Produto não encontrado no carrinho');
    }
}
function comprarProdutoDoCarrinho(idProduto) {
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const produto = carrinho.find(item => item.id === idProduto);

    if (produto) {
        sessionStorage.setItem('produtoCarrinho', JSON.stringify(produto));
        window.location.href = 'telaPag.html';
    } else {
        console.error('Produto não encontrado no carrinho');
    }
}

function atualizarCarrinho() {
    const cartItemsContainer = document.getElementById('cart-items');
    const totalContainer = document.getElementById('cart-total');
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    cartItemsContainer.innerHTML = '';

    carrinho.forEach(produto => {
        const cartItemElement = document.createElement('div');
        cartItemElement.classList.add('cart-item');
        cartItemElement.innerHTML = `
            <img src="${produto.imagem}" alt="Imagem do Produto" class="cart-item-image">
            <div class="cart-item-info">
                <p class="cart-item-name">${produto.titulo}</p> <!-- Aqui deve ser produto.titulo -->
                <p class="cart-item-price">${produto.preco}</p>
            </div>
            <div class="cart-item-actions">
               
                <button class="btn-remove" onclick="removerDoCarrinho(${produto.id})">Remover</button>
            </div> 
        `;

        cartItemsContainer.appendChild(cartItemElement);
    });

    const totalPrice = carrinho
        .map(produto => parseFloat(produto.preco.replace('R$', '').replace(',', '.')))
        .reduce((total, preco) => total + preco, 0);

    totalContainer.textContent = `R$ ${totalPrice.toFixed(2)}`;
}

//fim

function removerDoCarrinho(id) {
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    carrinho = carrinho.filter(produto => produto.id !== id);
    localStorage.setItem('carrinho', JSON.stringify(carrinho));
    atualizarCarrinho();
    atualizarContadorCarrinho(); // Atualiza o contador após remover um item
    verificarCarrinhoVazio(); // Verifica o estado do carrinho após a remoção
}

function limparCarrinho() {
    localStorage.removeItem('carrinho');
    atualizarCarrinho();
    atualizarContadorCarrinho(); // Atualiza o contador após limpar o carrinho
    verificarCarrinhoVazio(); // Verifica o estado do carrinho após limpar
}

function adicionarAoCarrinho(produto) {
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    carrinho.push(produto);
    localStorage.setItem('carrinho', JSON.stringify(carrinho));
    atualizarCarrinho();
    mostrarMensagemAdicao(`${produto.titulo} foi adicionado ao carrinho!`);
    atualizarContadorCarrinho(); // Atualiza o contador após adicionar um item
}

function toggleCartMenu() {
    const cartMenu = document.getElementById('cart-menu');
    cartMenu.classList.toggle('open');
    verificarCarrinhoVazio(); // Verifica o carrinho ao abrir o menu
    atualizarContadorCarrinho(); // Atualiza o contador ao abrir o menu
    atualizarCarrinho(); // Atualiza os itens do carrinho ao abrir o menu
}

function verificarCarrinhoVazio() {
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const emptyCartMessage = document.getElementById('empty-cart-message');
    console.log("Carrinho:", carrinho); // Verifique se o carrinho está sendo corretamente obtido
    if (carrinho.length === 0) {
        console.log("Carrinho vazio, exibindo mensagem."); // Verifique se esta mensagem aparece no console
        emptyCartMessage.style.display = 'block'; // Exibe a mensagem se o carrinho estiver vazio
    } else {
        emptyCartMessage.style.display = 'none'; // Oculta a mensagem se o carrinho não estiver vazio
    }
}

function atualizarContadorCarrinho() {
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const cartCountElement = document.getElementById('cart-count');
    cartCountElement.textContent = carrinho.length;
}

function mostrarMensagemAdicao(mensagem) {
    const mensagemAdicao = document.getElementById('mensagem-adicao');
    mensagemAdicao.textContent = mensagem;
    mensagemAdicao.style.display = 'block';
    setTimeout(() => {
        mensagemAdicao.style.display = 'none';
    }, 2000);
}

document.addEventListener('click', function(event) {
    const menu = document.getElementById('menu');
    const menuIcon = document.querySelector('.menu-icon');
    if (!menu.contains(event.target) && event.target !== menuIcon) {
        menu.classList.remove('open');
    }

    const cartMenu = document.getElementById('cart-menu');
    const cartIcon = document.querySelector('.cart-container');
    const isRemoveButton = event.target.classList.contains('btn-remove');
    
    if (!cartMenu.contains(event.target) && event.target !== cartIcon && !cartIcon.contains(event.target) && !isRemoveButton) {
        cartMenu.classList.remove('open');
    }
});

    </script>
    

</body>
</html>
